{% extends 'base.html' %}
{% block title %}Business Details{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card mb-4">
        <div class="card-body">
          <h2 class="fw-bold">{{ business.name }}</h2>
          <p class="text-muted">{{ business.description }}</p>
          <p><strong>Location:</strong> {{ business.location }}</p>
          {% if business.website %}<p><strong>Website:</strong> <a href="{{ business.website }}" target="_blank">{{ business.website }}</a></p>{% endif %}
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h4 class="fw-bold">Campaigns</h4>
          {% if campaigns %}
            <div class="row g-3">
              {% for c in campaigns %}
                <div class="col-md-6">
                  <div class="card campaign-card h-100 border-0 {% if c.is_funded %}funded-card{% endif %}">
                    {% if c.cover_image %}
                      <img src="{{ c.cover_image.url }}" class="card-img-top" alt="{{ c.title }} cover" loading="lazy" style="height:140px; object-fit:cover; border-top-left-radius:12px; border-top-right-radius:12px;">
                    {% endif %}
                    <div class="card-body">
                      <h5 class="card-title">{{ c.title }} {% if c.is_funded %}<span class="badge funded ms-2">Funded</span>{% endif %}</h5>
                      {% if c.is_funded %}
                        <div class="funded-ribbon">Funded</div>
                      {% endif %}
                      <p class="small text-muted">{{ c.description|truncatewords:18 }}</p>
                      <a href="{% url 'campaign_detail' c.id %}" class="btn btn-sm btn-brand">View</a>
                    </div>
                  </div>
                </div>
              {% endfor %}
            </div>
          {% else %}
            <div class="alert alert-info">No campaigns for this business yet.</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
